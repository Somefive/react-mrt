{"version":3,"sources":["components/mrt-viewer/node.js","components/logo.svg","components/mrt-viewer/index.js","components/toolbox/tool.js","components/toolbox/index.js","components/index.js","App.js","serviceWorker.js","index.js"],"names":["ThumbUpColor","chroma","luminance","desaturate","ThumbDownColor","ExchangeColor","CaretColor","AbstractColor","NodeCircle","props","state","hover","this","setState","onHover","className","cx","node","x","cy","y","r","radius","onMouseOver","onMouseLeave","stroke","color","strokeWidth","fill","React","Component","NodeText","displayInteractionTool","id","randomstring","generate","expand","action","source","onEdit","textColor","darken","baseY","textLines","iconSize","lineHeight","texts","pins","map","pin","_idx","isFocus","collapseHandler","textPieces","fullTextPieces","abstractHeight","abstractPieces","length","secondaryLineHeight","iconY","editButtonMarginTop","textWidth","fullTextWidth","generateEditIcon","T","dx","transform","style","transformOrigin","onClick","width","height","isUp","edits","rate","isDown","transformOriginX","scaleOrigin","key","textLeadingMargin","filter","fontSize","_text","idx","secondaryFontSize","editable","IconExchange","IconThumbsUpSolid","IconThumbsUp","IconThumbsDownSolid","IconThumbsDown","IconCaretUp","IconCaretDown","reverse","_extends","Object","assign","target","i","arguments","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","createElement","d","_ref3","_ref4","_ref5","_ref","svgRef","title","viewBox","ref","ForwardRef","forwardRef","MRTViewer","EraMinRatio","lastEraRatio","labelTextFontSize","labelTextLineHeight","nodeRadius","nodeTextLeadingMargin","nodeTextWidth","nodeFullSpan","horizonMarginTop","horizonMarginBottom","averageFontWidthRatio","nodePaddingLeft","nodePaddingRight","nodePaddingTop","nodePaddingBottom","nodeEditButtonMarginTop","nodeOffsetX","nodeOffsetY","nodeWidth","nodeTextLines","reduce","prev","nodeHeight","lines","Math","max","nodeTextLineHeight","toExchange","focusEraIndex","onEditChange","_data","data","extract","paper","year","venue","trim","citations","prefix","venue_year","exec","text","replace","abstract","root","branches","forEach","branch","push","sort","a","b","clusterNames","name","split","lodash","capitalize","join","hideSubBranch","disableTextBranchSpan","disableTextClusterSpan","nodeFontExtraSize","fontExtraSize","nodeTextFontSize","nodeTextSecondaryFontSize","nodeTextSecondaryLineHeight","nodeTextFold","span","textLength","floor","match","RegExp","line","nodeTextSecondaryFold","dataView","isSub","userEdits","clusterID","branchID","eras","years","flatten","_to","_cnt","eraMinSize","lastEraMinSize","from","to","cnt","branchWithEra","era","numBranches","numClusters","rootColor","scale","clusterColors","cubehelix","start","rotations","gamma","lightness","correctLightness","colors","branchColors","_","views","defs","nodes","edges","addEdge","x1","y1","x2","y2","addVerticalEdge","addHorizontalEdge","generateGradientColor","colorID","gradientUnits","offset","stopColor","fullSpan","eraID","horizon","_height","erasHeight","eraHeight","nodeLeft","nodeRight","_branch","startEra","endEra","_nextBranch","shrinkFlag","sib","yStart","yEnd","param","extendedBottomY","centerY","renderNodes","flattenDeep","_width","clusterLabelTextPieces","clusterLabelTexts","pieces","clusterLabelsHeight","extendedHeight","backgroundSolidColors","backgroundTextSolidColors","backgroundGradientSolidColors","backgroundSelectionColors","backgroundTextSelectionColors","backgroundGradientSelectionColors","stdDeviation","in","opacity","_sibBranch","isCurrent","visibility","textDecoration","textAnchor","hex","authors","Tool","primary","icon","theme","type","twoToneColor","tooltipText","children","Toolbox","onLike","onHideSubBranch","onDisableTextClusterSpan","e","onLoadJson","larger","scaleFont","zoom","full","capture","setTimeout","QRCode","toCanvas","document","getElementById","window","location","href","console","error","lang","translation","TooltipTextTranslation","t","toLowerCase","like","click","hidden","onChange","MRT","viewerScale","svgLib","saveSvgAsPng","srcWidth","baseVal","outputWidth","body","clientWidth","min","files","reader","FileReader","onload","JSON","parse","result","readAsText","undefined","App","sample_data","Boolean","hostname","ReactDOM","render","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.fc00949c.chunk.js","sourcesContent":["import React from 'react'\nimport { ReactComponent as IconThumbsUp } from '@ant-design/icons-svg/inline-svg/outline/like.svg'\nimport { ReactComponent as IconThumbsDown } from '@ant-design/icons-svg/inline-svg/outline/dislike.svg'\nimport { ReactComponent as IconThumbsUpSolid } from '@ant-design/icons-svg/inline-svg/fill/like.svg'\nimport { ReactComponent as IconThumbsDownSolid } from '@ant-design/icons-svg/inline-svg/fill/dislike.svg'\nimport { ReactComponent as IconExchange } from '@ant-design/icons-svg/inline-svg/outline/pull-request.svg'\nimport { ReactComponent as IconCaretDown } from '@ant-design/icons-svg/inline-svg/outline/arrows-alt.svg'\nimport { ReactComponent as IconCaretUp } from '@ant-design/icons-svg/inline-svg/outline/shrink.svg'\nimport chroma from 'chroma-js'\nimport randomstring from 'randomstring'\nimport './node.css'\n\nconst ThumbUpColor = chroma(\"green\").luminance(0.3).desaturate(1)\nconst ThumbDownColor = chroma(\"red\").luminance(0.3).desaturate(2)\nconst ExchangeColor = chroma(\"blue\").luminance(0.3).desaturate(1)\nconst CaretColor = chroma(\"grey\").luminance(0.3)\nconst AbstractColor = chroma(\"grey\").luminance(0.1)\n\nexport class NodeCircle extends React.Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {hover: false}\n    }\n\n    onHover(hover) {\n        this.setState({hover})\n        if (this.props.onHover) this.props.onHover(hover)\n    }\n    \n    render() {\n        return (\n            <circle className=\"era-node-circle\" cx={this.props.node.x} cy={this.props.node.y} r={this.props.radius}\n                onMouseOver={() => { this.onHover(true) }}\n                onMouseLeave={() => { this.onHover(false) }}\n                stroke={this.props.color} strokeWidth={this.props.strokeWidth}\n                fill={this.state.hover ? this.props.color : \"white\"}/>\n        )\n    }\n\n}\n\nexport class NodeText extends React.Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {displayInteractionTool: false}\n        this.id = randomstring.generate(8)\n        this.state = { expand: -1 }\n    }\n\n    onEdit(action, source) {\n        if (this.props.onEdit) this.props.onEdit(action, source)\n    }\n\n    onHover(hover) {\n        if (!hover && this.state.expand !== -1) this.setState({expand: -1})\n    }\n\n    render() {\n        let textColor = chroma(this.props.color).darken()\n        let baseY = 0\n        let textLines = 0\n        const iconSize = this.props.lineHeight * 1.25\n        const texts = this.props.pins.map((pin, _idx) => {\n            baseY = textLines * this.props.lineHeight\n            const isFocus = this.state.expand === _idx\n            const collapseHandler = () => this.setState({expand: isFocus ? -1 : _idx})\n            const textPieces = isFocus ? pin.fullTextPieces : pin.textPieces\n            const abstractHeight = pin.abstractPieces.length * this.props.secondaryLineHeight\n            const iconY = (textPieces.length - 1) * this.props.lineHeight + this.props.editButtonMarginTop + isFocus * abstractHeight\n            const textWidth = isFocus ? this.props.fullTextWidth : this.props.textWidth\n            const generateEditIcon = (T, dx, fill, action) => <g transform={`translate(${textWidth-iconSize*dx}, ${iconY})`}>\n                <g className=\"paper-edit-icon\" style={{transformOrigin: `${iconSize/2}px ${iconSize/2}px`}}\n                    onClick={action === \"collapse\" ? collapseHandler : (() => this.onEdit(action, pin))}>\n                    <T className=\"paper-edit-icon\" fill={fill} width={iconSize} height={iconSize}/>\n                    <rect className=\"paper-edit-icon\" width={iconSize} height={iconSize} fill=\"transparent\"/>\n                </g>\n            </g>\n            const isUp = pin.edits && pin.edits.rate > 0\n            const isDown = pin.edits && pin.edits.rate < 0\n            const transformOriginX = (this.props.scaleOrigin === \"left\") ? 0 : (this.props.scaleOrigin === \"middle\" ? (textWidth / 2) : textWidth)\n            return (\n                <g className=\"paper-view-group-outer\"\n                    key={_idx}\n                    onMouseOver={() => this.onHover(true)}\n                    onMouseLeave={() => this.onHover(false)}\n                    transform={`translate(${this.props.textLeadingMargin + this.props.radius}, ${baseY})`}>\n                    <g className=\"paper-view-group-inner\" style={{transformOrigin: `${transformOriginX}px ${-this.props.lineHeight}px`}}>\n                        <rect className=\"paper-text-background\" x={-this.props.lineHeight} y={-this.props.lineHeight * 2.5}\n                            width={textWidth+2*this.props.lineHeight} height={this.props.lineHeight * 4 + iconY + iconSize}\n                            fill=\"white\" filter=\"url(#blur-filter)\"/>\n                        <text className=\"paper-text\" fontSize={this.props.fontSize} fill={textColor} onClick={collapseHandler}>\n                            {textPieces.map((_text, idx) => {\n                                textLines++\n                                return <tspan key={idx} x=\"0\" y={idx * this.props.lineHeight}>{_text}</tspan>\n                            })}\n                        </text>\n                        {isFocus && \n                            <text className=\"paper-abstract-inner\" fontSize={this.props.secondaryFontSize} fill={AbstractColor}>\n                                {pin.abstractPieces.map((_text, idx) => <tspan key={idx} x=\"0\" y={textPieces.length * this.props.lineHeight + idx * this.props.secondaryLineHeight}>{_text}</tspan>)}\n                            </text>}\n                        <g className=\"paper-edit-icon-group\">\n                            {this.props.editable && generateEditIcon(IconExchange, 6, ExchangeColor, \"to-exchange\")}\n                            {generateEditIcon(isUp ? IconThumbsUpSolid : IconThumbsUp, 4.5, ThumbUpColor, isUp ? \"thumb-delete\" : \"thumb-up\")}\n                            {generateEditIcon(isDown ? IconThumbsDownSolid : IconThumbsDown, 3, ThumbDownColor, isDown ? \"thumb-delete\" : \"thumb-down\")}\n                            {pin.abstractPieces.length > 0 && generateEditIcon(isFocus ? IconCaretUp : IconCaretDown, 1.5, CaretColor, \"collapse\")}\n                        </g>\n                    </g>\n                </g>\n            )\n        })\n        return (\n            <g className=\"era-node-text-group\" transform={`translate(${this.props.x}, ${this.props.y})`}>\n                {texts.reverse()}\n            </g>\n        )\n    }\n}","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M520.650142 80.061167L369.746208 410.281909l269.859169-71.853003 1.641632-0.631397-120.596867-257.736342z\",\n  fill: \"#E9624C\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M256.852386 657.03194l385.909977 121.859662 100.392157-222.756937-76.272784-163.279319-333.251449 96.098656-76.777901 168.077938z\",\n  fill: \"#2A698D\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M92.689111 1015.791836h865.266741L773.966704 622.052534l-102.286349 232.227895-442.735726-136.381798L92.689111 1015.791836z\",\n  fill: \"#233D7E\"\n});\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M484.281662 0H0v1015.791836h6.187693L483.650265 1.641633l0.631397-1.641633zM555.376989 0l0.505117 1.136515 483.271427 1014.655321h4.293501V0H555.376989z\",\n  fill: \"#3C3837\"\n});\n\nvar SvgLogo = function SvgLogo(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 1024 1024\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgLogo, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/logo.7ecb0366.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react'\nimport { NodeCircle, NodeText } from './node'\nimport randomstring from 'randomstring'\nimport chroma from 'chroma-js'\nimport lodash from 'lodash'\nimport './index.css'\nimport { ReactComponent as Logo } from '../logo.svg'\n\nexport default class MRTViewer extends React.Component {\n\n    constructor(props) {\n        super(props)\n\n        this.EraMinRatio = this.props.EraMinRatio || 0.05\n        this.lastEraRatio = this.props.lastEraRatio || 0.2\n\n        this.strokeWidth = 4\n\n        this.labelTextFontSize = 64\n        this.labelTextLineHeight = 72\n\n        this.nodeRadius = 20\n        this.nodeTextLeadingMargin = 20\n        this.nodeTextWidth = 260\n\n        this.nodeFullSpan = 2\n\n        this.horizonMarginTop = 32\n        this.horizonMarginBottom = 48\n\n        this.averageFontWidthRatio = 0.6\n        \n        this.nodePaddingLeft = 20\n        this.nodePaddingRight = 20\n        this.nodePaddingTop = 32\n        this.nodePaddingBottom = 12\n\n        this.nodeEditButtonMarginTop = 10\n\n        this.nodeOffsetX = this.nodePaddingLeft + this.nodeRadius\n        this.nodeOffsetY = this.nodePaddingTop + this.nodeRadius\n        \n        this.nodeWidth = this.nodePaddingLeft + 2 * this.nodeRadius + this.nodeTextLeadingMargin + this.nodeTextWidth + this.nodePaddingRight\n        this.nodeTextLines = (node) => node.pins.reduce((prev, pin) => prev + pin.textPieces.length, 0)\n        this.nodeHeight = (lines) => this.nodePaddingTop + this.nodeRadius + Math.max(this.nodeRadius, (lines-1) * this.nodeTextLineHeight) + this.nodePaddingBottom\n\n        this.state = {toExchange: null, focusEraIndex: -1}\n    }\n\n    onEditChange(edits) {\n        if (this.props.onEditChange) this.props.onEditChange(edits)\n    }\n\n    render() {\n\n        this._data = this.props.data\n\n        const extract = (paper) => {\n            const id = paper[\"paper_id\"]\n            const year = paper[\"paper_year\"]\n            const venue = paper[\"paper_venue\"].trim()\n            const title = paper[\"paper_title\"].trim()\n            const citations = paper[\"paper_citations\"]\n            let prefix = `${year}`\n            const venue_year = /^(19|20)\\d{2}\\b/.exec(venue)\n            if (venue_year == null && venue.length > 0) {\n                prefix = `${year} ${venue}`\n            } else if (venue_year != null) {\n                prefix = `${venue}`\n            }\n            const text = `[${prefix}] ${title}`.replace('\\t', ' ').replace('\\n', ' ')\n            const abstract = paper[\"paper_abstract\"] ? paper[\"paper_abstract\"].trim().replace('\\t', ' ') : \"\"\n            return {id, year, venue, title, citations, text, abstract}\n        }\n        this.data = {\n            root: extract(this._data.root),\n            branches: []\n        }\n        this._data.branches.forEach(branch => {\n            this.data.branches.push(branch[0].map(extract))\n            this.data.branches.push(branch[1].map(extract))\n        })\n        this.data.branches.forEach(branch => branch.sort((a, b) => {\n            return a.year === b.year ? (b.citations - a.citations) : (b.year - a.year)\n        }))\n        this.clusterNames = this.props.data.clusterNames.map(name => name.split(' ').map(lodash.capitalize).join(' '))\n\n        this.hideSubBranch = this.props.hideSubBranch\n        this.disableTextBranchSpan = this.props.disableTextBranchSpan\n        this.disableTextClusterSpan = this.props.disableTextClusterSpan\n\n        this.nodeFontExtraSize = this.props.fontExtraSize || 0\n        this.nodeTextFontSize = 20 + this.nodeFontExtraSize\n        this.nodeTextSecondaryFontSize = 16 + this.nodeFontExtraSize\n        this.nodeTextLineHeight = 20 + this.nodeFontExtraSize\n        this.nodeTextSecondaryLineHeight = 18 + this.nodeFontExtraSize\n        this.nodeTextFold = (text, span) => {\n            const textLength = Math.floor(((span - 1) * this.nodeWidth + this.nodeTextWidth) / (this.nodeTextFontSize * this.averageFontWidthRatio))\n            return (text.match(new RegExp(`([^\\\\n]{1,${textLength}})(\\\\s|$)`, 'g')) || []).filter(line => line.length > 0)\n        }\n        this.nodeTextSecondaryFold = (text, span) => {\n            const textLength = Math.floor(((span - 1) * this.nodeWidth + this.nodeTextWidth) / (this.nodeTextSecondaryFontSize * this.averageFontWidthRatio))\n            return (text.match(new RegExp(`([^\\\\n]{1,${textLength}})(\\\\s|$)`, 'g')) || []).filter(line => line.length > 0)\n        }\n\n        // initialize dataView (filter subBranch is hideSubBranch is enabled)\n        let dataView = {root: {...this.data.root}, branches: this.data.branches.map(() => [])}\n        this.data.branches.forEach((branch, idx) => branch.forEach(paper => {\n            const isSub = idx % 2 === 1\n            const edits = this.props.userEdits[paper.id]\n            const clusterID = edits ? edits.clusterID : Math.floor(idx / 2)\n            const branchID = clusterID * 2 + isSub\n            if (!this.hideSubBranch || !isSub) dataView.branches[branchID].push({...paper, isSub, edits, clusterID, branchID})\n        }))\n        dataView.branches.forEach(branch => branch.sort((a, b) => (a.year === b.year) ? (b.citations - a.citations) : (b.year - a.year)))\n\n        // calculate eras according to density of paper\n        let eras = []\n        {\n            let years = lodash.flatten(dataView.branches).map(paper => paper.year).sort().reverse()\n            let _to = years[0]\n            let _cnt = 1\n            let eraMinSize = this.EraMinRatio * years.length\n            let lastEraMinSize = this.lastEraRatio * years.length\n            for (let i = 1; i < years.length; i++) {\n                if (years[i] === years[i-1] || _cnt < eraMinSize || i > years.length - lastEraMinSize) _cnt += 1\n                else {\n                    eras.push({from: years[i-1], to: _to, cnt: _cnt})\n                    _to = years[i]\n                    _cnt = 1\n                }\n            }\n            eras.push({from: years[years.length-1], to: _to, cnt: _cnt})\n        }\n        const branchWithEra = (branch, era) => branch.filter(paper => paper.year >= era.from && paper.year <= era.to)\n\n        // initialize views\n        let numBranches = dataView.branches.length\n        let numClusters = Math.floor(numBranches / 2)\n        const rootColor = chroma.scale()(0.5)\n        const clusterColors = chroma.cubehelix().start(200).rotations(3).gamma(0.7).lightness([0.2, 0.6]).scale().correctLightness().colors(numClusters)\n        const branchColors = dataView.branches.map((_, branchID) => chroma(clusterColors[Math.floor(branchID / 2)]).luminance(branchID % 2 === 0 ? 0.25 : 0.5))\n        let views = {defs: [], nodes: {}, edges: []}\n        const addEdge = (x1, y1, x2, y2, color) => views.edges.push(<line key={views.edges.length} x1={x1} y1={y1} x2={x2} y2={y2} strokeWidth={this.strokeWidth - 1} stroke={color}/>)\n        const addVerticalEdge = (x, y1, y2, color) => addEdge(x, y1, x, y2, color)\n        const addHorizontalEdge = (x1, x2, y, color) => addEdge(x1, y, x2, y, color)\n        const generateGradientColor = (from, to, x1, y1, x2, y2) => {\n            const colorID = randomstring.generate(8)\n            views.defs.push(\n                <defs key={colorID}>\n                    <linearGradient id={colorID} x1={x1} y1={y1} x2={x2} y2={y2} gradientUnits=\"userSpaceOnUse\">\n                    <stop offset=\"20%\"  stopColor={from} />\n                    <stop offset=\"80%\" stopColor={to} />\n                    </linearGradient>\n                </defs>\n            )\n            return `url('#${colorID}')`\n        }\n\n        // Arrange coornidates for each era node\n        views.nodes.root = {\n            x: this.nodeWidth * (dataView.branches.length - 1) / 2 + this.nodeOffsetX,\n            y: this.nodeOffsetY,\n            color: rootColor,\n            pins: [{...dataView.root, \n                textPieces: this.nodeTextFold(dataView.root.text, 2), \n                fullTextPieces: this.nodeTextFold(dataView.root.text, this.nodeFullSpan),\n                abstractPieces: this.nodeTextSecondaryFold(dataView.root.abstract, this.nodeFullSpan),\n                edits: this.props.userEdits[dataView.root.id]\n            }],\n            span: 2,\n            fullSpan: this.nodeFullSpan,\n        }\n        views.nodes.root.lines = this.nodeTextLines(views.nodes.root)\n        views.nodes.root.height = this.nodeHeight(views.nodes.root.lines)\n\n        views.nodes.branches = dataView.branches.map((branch, branchID) => eras.map((era, eraID) => { return {\n            x: this.nodeWidth * branchID + this.nodeOffsetX,\n            y: 0,\n            color: branchColors[branchID],\n            pins: branchWithEra(branch, era),\n            era,\n            eraID,\n            clusterID: Math.floor(branchID / 2),\n            branchID,\n        }}))\n        \n        views.nodes.branches.forEach((branch, branchID) => branch.forEach((node, eraID) => {\n            if (node.pins.length === 0) return\n            node.span = (branchID < numBranches - 1 && views.nodes.branches[branchID+1][eraID].pins.length === 0\n                && !this.disableTextBranchSpan && (!this.disableTextClusterSpan || branchID % 2 === 0)) ? 2 : 1\n            node.fullSpan = (branchID < numBranches - 1) ? this.nodeFullSpan : 1\n            node.pins.forEach(pin => {\n                pin.textPieces = this.nodeTextFold(pin.text, node.span)\n                pin.fullTextPieces = this.nodeTextFold(pin.text, node.fullSpan)\n                pin.abstractPieces = this.nodeTextSecondaryFold(pin.abstract, node.fullSpan)\n            })\n            node.lines = this.nodeTextLines(node)\n            node.height = this.nodeHeight(node.lines)\n        }))\n\n        const horizon = views.nodes.root.height + this.horizonMarginTop\n        let _height = horizon + this.horizonMarginBottom\n        const erasHeight = eras.map((_, eraID) => {\n            views.nodes.branches.forEach(branch => branch[eraID].y = _height + this.nodeOffsetY)\n            const eraHeight = views.nodes.branches.reduce((prev, branch) => Math.max(prev, branch[eraID].height || 0), 0)\n            _height += eraHeight\n            return eraHeight\n        })\n\n        {\n            const node = views.nodes.root, nodeLeft = views.nodes.branches[0][0], nodeRight = views.nodes.branches[numBranches - 2][0]\n            addVerticalEdge(node.x, node.y, horizon, rootColor)\n            addHorizontalEdge(nodeLeft.x, nodeRight.x, horizon, rootColor)\n        }\n        views.nodes.branches.forEach((branch, branchID) => {\n            const _branch = branch.filter(node => node.pins.length > 0)\n            if (_branch.length === 0 && branchID % 2 === 1) return\n            const startEra = (branchID % 2 === 0) ? 0 : _branch[0].eraID\n            let endEra = (_branch.length > 0) ? _branch[_branch.length-1].eraID : 0\n            if (branchID % 2 === 0) {\n                const _nextBranch = views.nodes.branches[branchID+1].filter(node => node.pins.length > 0)\n                if (_nextBranch.length > 0) endEra = Math.max(endEra, _nextBranch[0].eraID)\n            }\n            const shrinkFlag = !this.disableTextBranchSpan && (!(this.disableTextClusterSpan && branchID % 2 === 0))\n            for (let eraID = startEra + 1; eraID <= endEra; eraID++) {\n                let node = branch[eraID]\n                let sib = branchID > 0 ? views.nodes.branches[branchID-1][eraID] : null\n                const yStart = (shrinkFlag && node.pins.length === 0 && ((branchID > 0 && sib.pins.length > 0) || (eraID === endEra))) ? (node.y - this.nodeRadius - this.nodeTextLineHeight) : node.y\n                node = branch[eraID-1]\n                sib = branchID > 0 ? views.nodes.branches[branchID-1][eraID-1] : null\n                const yEnd = (shrinkFlag && node.pins.length === 0 && branchID > 0 && sib.pins.length > 0) ? (node.y - this.nodeOffsetY + this.nodeHeight(this.nodeTextLines(sib)) - this.nodePaddingBottom + this.nodeTextLineHeight) : node.y\n                addVerticalEdge(node.x, yStart, yEnd, node.color)\n            }\n            if (branchID % 2 === 0) {\n                const node = branch[0]\n                const sib = branchID > 0 ? views.nodes.branches[branchID-1][0] : null\n                const yEnd = (shrinkFlag && node.pins.length === 0 && branchID > 0 && sib.pins.length > 0) ? (node.y - this.nodeRadius - this.nodeTextLineHeight) : node.y\n                addVerticalEdge(node.x, horizon, yEnd, generateGradientColor(rootColor, node.color, node.x, horizon, node.x, yEnd))\n            } else {\n                const node = branch[startEra]\n                const sib = views.nodes.branches[branchID-1][startEra]\n                const yEnd = node.y - this.nodeRadius - this.nodeTextLineHeight\n                const yStart = node.y\n                addVerticalEdge(node.x, yStart, yEnd, node.color)\n                addHorizontalEdge(node.x, sib.x, yEnd, generateGradientColor(node.color, sib.color, node.x, yEnd, sib.x, yEnd))\n            }\n        })\n        \n        const onEdit = (action, source, param) => {\n            let userEdits = {...this.props.userEdits}\n            if (!userEdits[source.id] && (action === \"thumb-up\" || action === \"thumb-down\" || action === \"exchange\")) {\n                userEdits[source.id] = {rate: 0, clusterID: source.clusterID}\n            }\n            if (action === \"thumb-up\" && userEdits[source.id].rate <= 0) {\n                userEdits[source.id].rate = 1\n                this.onEditChange(userEdits)\n            } else if (action === \"thumb-down\" && userEdits[source.id].rate >= 0) {\n                userEdits[source.id].rate = -1\n                this.onEditChange(userEdits)\n            } else if (action === \"thumb-delete\" && userEdits[source.id] && userEdits[source.id].rate !== 0) {\n                userEdits[source.id].rate = 0\n                this.onEditChange(userEdits)\n            } else if (action === \"to-exchange\" && this.state.toExchange === null) {\n                this.setState({toExchange: source})\n            } else if (action === \"exchange\") {\n                userEdits[source.id].clusterID = param\n                this.onEditChange(userEdits)\n                this.setState({toExchange: null})\n            }\n        }\n\n        const extendedBottomY = views.nodes.branches.map(branch => branch[branch.length-1]).reduce((prev, node) => {\n            let centerY = node.y\n            node.pins.forEach(pin => {\n                prev = Math.max(prev, centerY + (pin.fullTextPieces.length - 1) * this.nodeTextLineHeight * 2 + pin.abstractPieces.length * this.nodeTextSecondaryLineHeight + this.nodeTextLineHeight * 2)\n                centerY += pin.textPieces.length * this.nodeTextLineHeight\n            })\n            return prev\n        }, _height)\n\n        const renderNodes = lodash.flattenDeep(views.nodes.branches).sort((a, b) => (a.eraID === b.eraID) ? (b.branchID - a.branchID) : (b.eraID - a.eraID))\n        renderNodes.push(views.nodes.root)\n\n        const _width = this.nodeWidth * dataView.branches.length\n        const clusterLabelTextPieces = this.clusterNames.map(name => name.split(' '))\n        const clusterLabelTexts = clusterLabelTextPieces.map((pieces, _idx) => \n            <text key={_idx}>\n                {pieces.reverse().map((_text, idx) => <tspan key={idx} x=\"0\" y={-idx * this.labelTextLineHeight}>{_text}</tspan>)}\n            </text>\n        )\n        const clusterLabelsHeight = clusterLabelTextPieces.reduce((prev, pieces) => Math.max(prev, pieces.length), 0) * this.labelTextLineHeight\n        _height += clusterLabelsHeight + this.labelTextLineHeight\n\n        const extendedHeight = Math.max(this.labelTextLineHeight * 1.5, extendedBottomY - _height)\n        const backgroundSolidColors = clusterColors.map(color => chroma(color).luminance(0.9))\n        const backgroundTextSolidColors = clusterColors.map(color => chroma(color).luminance(0.7))\n        const backgroundGradientSolidColors = clusterColors.map((color, idx) => {\n            const x = views.nodes.branches[idx*2][eras.length-1].x\n            return generateGradientColor(chroma(color).luminance(0.9), \"white\", x, _height, x, _height+extendedHeight)\n        })\n        const backgroundSelectionColors = clusterColors.map(color => chroma(color).luminance(0.5))\n        const backgroundTextSelectionColors = clusterColors.map(color => chroma(color).luminance(0.2))\n        const backgroundGradientSelectionColors = clusterColors.map((color, idx) => {\n            const x = views.nodes.branches[idx*2][eras.length-1].x\n            return generateGradientColor(chroma(color).luminance(0.5), \"white\", x, _height, x, _height+extendedHeight)\n        })\n\n        return <svg className=\"mrt\" id={this.props.id} width=\"100%\" viewBox={`0 0 ${_width} ${_height+extendedHeight}`}>\n            {views.defs}\n            <filter id=\"blur-filter\">\n                <feGaussianBlur stdDeviation={this.nodeTextLineHeight} in=\"SourceGraphic\"/>\n            </filter>\n            {\n                <g className=\"mrt-background\">\n                    <rect x=\"0\" y=\"0\" width={_width} height={horizon} fill={chroma(rootColor).luminance(0.9)}></rect>\n                </g>\n            }\n            {\n                clusterLabelTexts.map((texts, idx) => {\n                    return <g className=\"mrt-background\" key={idx} opacity={this.state.toExchange === null ? 1 : 0}>\n                        <rect x={this.nodeWidth*idx*2} y={horizon} width={this.nodeWidth*2} height={_height-horizon} fill={backgroundSolidColors[idx]}/>\n                        <rect x={this.nodeWidth*idx*2} y={_height} width={this.nodeWidth*2} height={extendedHeight} fill={backgroundGradientSolidColors[idx]}/>\n                        <g transform={`translate(${this.nodeWidth*idx*2+this.nodeOffsetX}, ${_height-this.labelTextLineHeight/2})`} fill={backgroundTextSolidColors[idx]} fontSize={this.labelTextFontSize}>{texts}</g>\n                    </g>\n                })\n            }\n            {\n                eras.map((era, idx) => \n                <g key={idx} className=\"mrt-era-background\" transform={`translate(0, ${views.nodes.branches[0][idx].y - this.nodeRadius - this.nodePaddingTop + erasHeight[idx]})`}>\n                    <rect className=\"mrt-era-background\" x=\"0\" y={-erasHeight[idx]} width={_width} height={erasHeight[idx]} opacity={(idx === this.state.focusEraIndex) ? 0.1 : 0}/>\n                    <text className=\"mrt-era-background\" fontSize={this.labelTextFontSize} x={this.nodePaddingLeft} y={-this.labelTextFontSize/2} opacity={(idx === this.state.focusEraIndex) ? 0.2 : 0}>\n                        {era.from === era.to ? era.from : `${era.from} - ${era.to}`}\n                    </text>\n                </g>)\n            }\n            {\n                views.nodes.branches.map((branch, idx) => {\n                    if (idx % 2 !== 0) return <text key={idx}/>\n                    const _branch = branch.filter(node => node.pins.length > 0)\n                    const _sibBranch = views.nodes.branches[idx+1].filter(node => node.pins.length > 0)\n                    if (_branch.length === 0 && _sibBranch.length === 0) return <text key={idx}/>\n                    const fontSize = this.nodeTextFontSize * 2\n                    const y = ((_branch.length === 0 || (_sibBranch.length > 0 && _sibBranch[0].eraID <= _branch[0].eraID)) ?\n                        (_sibBranch[0].y - this.nodeRadius - this.nodeTextLineHeight) :\n                        (_branch[0].y - this.nodeTextLineHeight)) - fontSize / 2\n                    const x = branch[0].x + this.nodeRadius + this.nodeTextLeadingMargin\n                    const color = chroma(branchColors[idx]).darken(2)\n                    return <text key={idx} x={x} y={y} fill={color} fontSize={fontSize}>{this.clusterNames[Math.floor(idx / 2)]}</text>\n                })\n            }\n            {views.edges}\n            {renderNodes.map((node, idx) => node.pins.length > 0 &&\n                <NodeCircle key={idx} node={node}\n                            radius={this.nodeRadius}\n                            lineHeight={this.nodeTextLineHeight}\n                            color={node.color}\n                            strokeWidth={this.strokeWidth}\n                            onHover={(hover) => \n                                this.setState({...this.state,\n                                    focusEraIndex: hover ? node.eraID : -1\n                                })   \n                            }/>\n            )}\n            <g className=\"mrt-node-text-container\">\n            {renderNodes.map((node, idx) => node.pins.length > 0 &&\n                <NodeText key={idx}\n                      pins={node.pins} \n                      x={node.x} y={node.y}\n                      radius={this.nodeRadius}\n                      lineHeight={this.nodeTextLineHeight}\n                      secondaryLineHeight={this.nodeTextSecondaryLineHeight}\n                      textWidth={(node.span - 1) * this.nodeWidth + this.nodeTextWidth}\n                      fullTextWidth={(node.fullSpan - 1) * this.nodeWidth + this.nodeTextWidth}\n                      color={node.color}\n                      fontSize={this.nodeTextFontSize}\n                      secondaryFontSize={this.nodeTextSecondaryFontSize}\n                      strokeWidth={this.strokeWidth}\n                      onEdit={onEdit}\n                      textLeadingMargin={this.nodeTextLeadingMargin}\n                      editable={typeof(node.clusterID) !== \"undefined\"}\n                      editButtonMarginTop={this.nodeEditButtonMarginTop}\n                      scaleOrigin={(node.clusterID === numClusters - 1) ? \"right\" : ((node.branchID === numBranches - 3) ? \"middle\" : \"left\")}/>)}\n            </g>\n            {\n                clusterLabelTexts.map((texts, idx) => {\n                    const isCurrent = this.state.toExchange !== null && idx === this.state.toExchange.clusterID\n                    return <g className=\"mrt-background\" key={idx} opacity={this.state.toExchange === null ? 0 : 1} visibility={this.state.toExchange === null ? \"hidden\" : \"none\"} onClick={() => onEdit(\"exchange\", this.state.toExchange, idx)}>\n                        <rect className=\"mrt-background-card\" x={this.nodeWidth*idx*2} y={horizon} width={this.nodeWidth*2} height={_height-horizon} fill={backgroundSelectionColors[idx]}/>\n                        <rect className=\"mrt-background-card\" x={this.nodeWidth*idx*2} y={_height} width={this.nodeWidth*2} height={extendedHeight} fill={backgroundGradientSelectionColors[idx]}/>\n                        <g className=\"mrt-background-text\" style={{textDecoration: isCurrent ? \"underline\" : \"\"}} transform={`translate(${this.nodeWidth*idx*2+this.nodeOffsetX}, ${_height-this.labelTextLineHeight/2})`} fill={backgroundTextSelectionColors[idx]} fontSize={this.labelTextFontSize}>{texts}</g>\n                    </g>\n                })\n            }\n            {\n                <g opacity=\"0.5\" transform={`translate(${_width}, ${_height+extendedHeight-this.labelTextLineHeight * 0.5})`}>                    \n                    <Logo x={-this.labelTextFontSize * 3.35} y={-this.labelTextFontSize * 1.78} height={this.labelTextFontSize * 0.8} width={this.labelTextFontSize * 0.8}/>\n                    <text x={-this.labelTextFontSize * 0.1} y={-this.labelTextFontSize * 0.05} textAnchor=\"end\"\n                        fontSize={this.labelTextFontSize * 0.75} fill={chroma(\"grey\").luminance(0.3).hex()}>{(this.props.authors || []).join(', ')}\n                    </text>\n                    <text x={-this.labelTextFontSize * 0.1} y={-this.labelTextFontSize * 1} textAnchor=\"end\"\n                        fontSize={this.labelTextFontSize * 0.7} fill={chroma(\"grey\").luminance(0.3).hex()}>AMiner\n                    </text>\n                </g>\n            }\n        </svg>\n    }\n}","import React from 'react'\nimport { Icon } from 'antd'\nimport chroma from 'chroma-js'\nimport './tool.css'\n\nexport default class Tool extends React.Component {\n\n    onClick() {\n        if (this.props.onClick) this.props.onClick()\n    }\n\n    render() {\n        const luminance = this.props.luminance || (this.props.primary ? 0.4 : 0.2)\n        const color = chroma(this.props.color).luminance(luminance)\n        const textColor = color.luminance(luminance / 2)\n        const icon = (this.props.theme !== \"twoTone\") \n            ? <Icon className=\"toolicon\" type={this.props.type} theme={this.props.theme} onClick={() => this.onClick()} style={{color: color.hex()}}/>\n            : <Icon className=\"toolicon\" type={this.props.type} theme={this.props.theme} onClick={() => this.onClick()} twoToneColor={color.hex()}/>\n        return (\n            <div className={`tool tooltip ${this.props.primary ? \"primary\" : \"secondary\"} ${this.props.className}`}>\n                {icon}\n                <span className=\"tooltip-text\" style={{color: textColor.hex()}}>{this.props.tooltipText}</span>\n                {this.props.children}\n            </div>\n        )\n    }\n}\n","import React from 'react'\nimport QRCode from 'qrcode'\nimport './toolbox.css'\nimport Tool from './tool'\nimport TooltipTextTranslation from './tooltip-text-translation.json'\n\nexport class Toolbox extends React.Component {\n\n    onLike() {\n        if (this.props.onLike) this.props.onLike()\n    }\n\n    onHideSubBranch() {\n        if (this.props.onHideSubBranch) this.props.onHideSubBranch()\n    }\n\n    onDisableTextClusterSpan() {\n        if (this.props.onDisableTextClusterSpan) this.props.onDisableTextClusterSpan()\n    }\n\n    onLoadJson(e) {\n        if (this.props.onLoadJson) this.props.onLoadJson(e)\n    }\n\n    scaleFont(larger) {\n        if (this.props.scaleFont) this.props.scaleFont(larger)\n    }\n\n    zoom(larger) {\n        if (this.props.zoom) this.props.zoom(larger)\n    }\n    \n    capture(full) {\n        if (this.props.capture) this.props.capture(full)\n    }\n\n    render() {\n        setTimeout(() => {\n            QRCode.toCanvas(document.getElementById(\"mrt-share-qrcode-canvas\"), window.location.href, (e) => { if (e) console.error(e) })\n        }, 500)\n        const lang = this.props.lang || \"en\"\n        const translation = TooltipTextTranslation[lang]\n        const t = (text) => (translation && translation[text.toLowerCase()]) ? translation[text.toLowerCase()] : text\n        return (\n            <div>\n                <div className=\"toolgroup horizontal\">\n                    <div className=\"toolgroup secondary vertical\">\n                        <Tool type=\"heart\" theme={this.props.like ? \"filled\" : \"twoTone\"} color=\"red\" tooltipText={t(this.props.like ? \"Dislike\" : \"Like\")} primary onClick={() => this.onLike()}/>\n                    </div>\n                    <div className=\"toolgroup secondary vertical\">\n                        <Tool type=\"share-alt\" theme=\"outlined\" color=\"green\" tooltipText={t(\"Share\")} primary/>\n                        <Tool className=\"qrcode-icon\" type=\"qrcode\" theme=\"outlined\" color=\"green\" tooltipText={t(\"QR Code\")}>\n                            <canvas className=\"qrcode\" id=\"mrt-share-qrcode-canvas\"/>\n                        </Tool>\n                    </div>\n                    <div className=\"toolgroup secondary vertical\">\n                        <Tool type=\"font-size\" theme=\"outlined\" color=\"pink\" tooltipText={t(\"Font Size\")} primary/>\n                        <Tool type=\"zoom-in\" theme=\"outlined\" color=\"pink\" tooltipText={t(\"Larger Font\")} onClick={() => this.scaleFont(true)}/>\n                        <Tool type=\"zoom-out\" theme=\"outlined\" color=\"pink\" tooltipText={t(\"Smaller Font\")} onClick={() => this.scaleFont(false)}/>\n                    </div>\n                    <div className=\"toolgroup secondary vertical\">\n                        <Tool type=\"search\" theme=\"outlined\" color=\"aquamarine\" tooltipText={t(\"Zoom\")} primary/>\n                        <Tool type=\"zoom-in\" theme=\"outlined\" color=\"aquamarine\" tooltipText={t(\"Zoom In\")} onClick={() => this.zoom(true)}/>\n                        <Tool type=\"zoom-out\" theme=\"outlined\" color=\"aquamarine\" tooltipText={t(\"Zoom Out\")} onClick={() => this.zoom(false)}/>\n                    </div>\n                    <div className=\"toolgroup secondary vertical\">\n                        <Tool type=\"download\" theme=\"outlined\" color=\"blue\" tooltipText={t(\"Download\")} primary/>\n                        <Tool type=\"file-image\" theme=\"twoTone\" color=\"blue\" tooltipText={t(\"Full Picture\")} onClick={() => this.capture(true)}/>\n                        <Tool type=\"camera\" theme=\"twoTone\" color=\"blue\" tooltipText={t(\"Snapshot\")} onClick={() => this.capture(false)}/>\n                    </div>\n                    <div className=\"toolgroup secondary vertical\">\n                        <Tool type=\"control\" theme=\"outlined\" color=\"teal\" tooltipText={t(\"Control\")} primary/>\n                        <Tool type={`eye${this.props.hideSubBranch ? \"\" : \"-invisible\"}`} theme=\"twoTone\" color=\"teal\" onClick={() => this.onHideSubBranch()}\n                            tooltipText={t(this.props.hideSubBranch ? \"Display Sub Branch\" : \"Hide Sub Branch\")}/>\n                        <Tool type=\"column-width\" theme=\"outlined\" color=\"teal\" onClick={() => this.onDisableTextClusterSpan()}\n                            tooltipText={t(this.props.disableTextClusterSpan ? \"Enable Text Span\" : \"Disable Text Span\")}/>\n                        {this.props.onLoadJson && \n                        <Tool type=\"folder-open\" theme=\"outlined\" color=\"teal\" onClick={() => document.getElementById(\"mrt-file-load-input\").click()}\n                            tooltipText={t(\"Load JSON\")}/>}\n                        <input id=\"mrt-file-load-input\" type=\"file\" hidden onChange={(e) => this.onLoadJson(e)}/>\n                    </div>\n                    <div className=\"toolgroup vertical\">\n                        <Tool className=\"toolgroup\" type=\"appstore\" theme=\"outlined\" color=\"purple\" tooltipText={t(\"Toolbox\")} primary/>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n\n}\n","import React from 'react'\nimport MRTViewer from './mrt-viewer'\nimport './index.css'\nimport svgLib from 'save-svg-as-png'\nimport { Toolbox } from './toolbox/index'\n\nexport default class MRT extends React.Component {\n    \n    constructor(props) {\n        super(props)\n        this.state = {\n            viewerScale: 100,\n            hideSubBranch: false,\n            disableTextClusterSpan: false,\n            fontExtraSize: 0,\n        }\n    }\n\n    onLike() {\n        if (this.props.onLike) this.props.onLike()\n    }\n\n    capture(full) {\n        if (full)\n            svgLib.saveSvgAsPng(document.getElementById(\"mrt-viewer\"), `master-reading-tree.png`)\n        else {\n            const srcWidth = document.getElementById(\"mrt-viewer\").viewBox.baseVal.width\n            const outputWidth = document.body.clientWidth\n            svgLib.saveSvgAsPng(document.getElementById(\"mrt-viewer\"), `master-reading-tree-snapshot.png`, {scale: outputWidth / srcWidth})\n        }\n    }\n\n    zoom(larger) {\n        this.setState({...this.state, viewerScale: Math.min(Math.max(this.state.viewerScale + (larger ? 10 : -10), 100), 1000)})\n    }\n\n    scaleFont(larger) {\n        this.setState({...this.state, fontExtraSize: Math.max(0, Math.min(10, this.state.fontExtraSize + (larger ? 2 : -2)))})\n    }\n\n    onLoadJson(e) {\n        if (e.target.files.length === 0) return\n        const reader = new FileReader()\n        reader.onload = (e) => {\n            if (this.props.onLoadJson) this.props.onLoadJson(JSON.parse(e.target.result))\n        }\n        reader.readAsText(e.target.files[0])\n    }\n\n    onEditChange(edits) {\n        if (this.props.onEditChange) this.props.onEditChange(edits)\n    }\n\n    render() {\n        return (\n            <div className=\"mrt-container\" style={{width: `${this.state.viewerScale}%`}}>\n                <Toolbox lang={this.props.lang}\n                    onLike={() => this.onLike()} like={this.props.like}\n                    onHideSubBranch={() => this.setState({hideSubBranch: !this.state.hideSubBranch})} hideSubBranch={this.state.hideSubBranch}\n                    onDisableTextClusterSpan={() => this.setState({disableTextClusterSpan: !this.state.disableTextClusterSpan})} disableTextClusterSpan={this.state.disableTextClusterSpan}\n                    onLoadJson={this.props.onLoadJson ? (e) => this.onLoadJson(e) : undefined}\n                    scaleFont={(larger) => this.scaleFont(larger)}\n                    zoom={(larger) => this.zoom(larger)}\n                    capture={(full) => this.capture(full)}\n                />\n                <MRTViewer id=\"mrt-viewer\" data={this.props.data}\n                    hideSubBranch={this.state.hideSubBranch} disableTextClusterSpan={this.state.disableTextClusterSpan}\n                    fontExtraSize={this.state.fontExtraSize}\n                    authors={this.props.authors}\n                    onEditChange={(edits) => this.onEditChange(edits)} userEdits={this.props.userEdits}/>\n            </div>\n        )\n    }\n}","import React from 'react';\nimport './App.css';\nimport sample_data from './sample.json';\nimport MRT from './components';\n\nclass App extends React.Component {\n  \n  constructor(props) {\n    super(props)\n    this.state = {data: sample_data, like: false, userEdits: {}}\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <MRT data={this.state.data} authors={[\"Somefive\", \"Rainatum\"]} onLoadJson={(data) => this.setState({data})}\n          onLike={() => this.setState({like: !this.state.like})} like={this.state.like}\n          onEditChange={(edits) => this.setState({userEdits: edits})} userEdits={this.state.userEdits}\n          lang=\"en\"/>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}