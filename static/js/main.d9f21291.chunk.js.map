{"version":3,"sources":["components/mrt-viewer/node.js","components/logo.svg","components/mrt-viewer/index.js","components/index.js","App.js","serviceWorker.js","index.js"],"names":["ThumbUpColor","chroma","luminance","desaturate","ThumbDownColor","ExchangeColor","CaretColor","AbstractColor","NodeCircle","props","state","hover","this","setState","onHover","className","cx","node","x","cy","y","r","radius","onMouseOver","onMouseLeave","stroke","color","strokeWidth","fill","React","Component","NodeText","displayInteractionTool","id","randomstring","generate","expand","action","source","onEdit","textColor","darken","baseY","textLines","iconSize","lineHeight","texts","pins","map","pin","_idx","isFocus","collapseHandler","textPieces","fullTextPieces","abstractHeight","abstractPieces","length","secondaryLineHeight","iconY","editButtonMarginTop","textWidth","fullTextWidth","generateEditIcon","T","dx","transform","style","transformOrigin","onClick","width","height","isUp","edits","rate","isDown","transformOriginX","scaleOrigin","key","textLeadingMargin","filter","fontSize","_text","idx","secondaryFontSize","editable","IconExchange","IconThumbsUpSolid","IconThumbsUp","IconThumbsDownSolid","IconThumbsDown","IconCaretUp","IconCaretDown","reverse","_extends","Object","assign","target","i","arguments","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","createElement","d","_ref3","_ref4","_ref5","_ref","svgRef","title","viewBox","ref","ForwardRef","forwardRef","MRTViewer","EraMinRatio","lastEraRatio","labelTextFontSize","labelTextLineHeight","nodeRadius","nodeTextLeadingMargin","nodeTextWidth","nodeFullSpan","horizonMarginTop","horizonMarginBottom","averageFontWidthRatio","nodePaddingLeft","nodePaddingRight","nodePaddingTop","nodePaddingBottom","nodeEditButtonMarginTop","nodeOffsetX","nodeOffsetY","nodeWidth","nodeTextLines","reduce","prev","nodeHeight","lines","Math","max","nodeTextLineHeight","userEdits","toExchange","focusEraIndex","_data","data","extract","paper","year","venue","trim","citations","prefix","venue_year","exec","text","replace","abstract","root","branches","forEach","branch","push","sort","a","b","clusterNames","name","split","lodash","capitalize","join","hideSubBranch","disableTextBranchSpan","disableTextClusterSpan","nodeFontExtraSize","fontExtraSize","nodeTextFontSize","nodeTextSecondaryFontSize","nodeTextSecondaryLineHeight","nodeTextFold","span","textLength","floor","match","RegExp","line","nodeTextSecondaryFold","dataView","isSub","clusterID","branchID","eras","years","flatten","_to","_cnt","eraMinSize","lastEraMinSize","from","to","cnt","branchWithEra","era","numBranches","numClusters","rootColor","scale","clusterColors","cubehelix","start","rotations","gamma","lightness","correctLightness","colors","branchColors","_","views","defs","nodes","edges","addEdge","x1","y1","x2","y2","addVerticalEdge","addHorizontalEdge","generateGradientColor","colorID","gradientUnits","offset","stopColor","fullSpan","eraID","horizon","_height","erasHeight","eraHeight","nodeLeft","nodeRight","_branch","startEra","endEra","_nextBranch","shrinkFlag","sib","yStart","yEnd","param","_state","extendedBottomY","centerY","renderNodes","flattenDeep","_width","clusterLabelTextPieces","clusterLabelTexts","pieces","clusterLabelsHeight","extendedHeight","backgroundSolidColors","backgroundTextSolidColors","backgroundGradientSolidColors","backgroundSelectionColors","backgroundTextSelectionColors","backgroundGradientSelectionColors","stdDeviation","in","opacity","_sibBranch","isCurrent","visibility","textDecoration","textAnchor","hex","authors","MRT","like","viewerScale","displayQRCode","generated","full","svgLib","saveSvgAsPng","document","getElementById","srcWidth","baseVal","outputWidth","body","clientWidth","larger","min","display","QRCode","toCanvas","window","location","href","e","console","error","files","reader","FileReader","onload","onLoadJson","JSON","parse","result","readAsText","type","theme","twoToneColor","scaleFont","zoom","capture","click","hidden","onChange","App","sample_data","Boolean","hostname","ReactDOM","render","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.d9f21291.chunk.js","sourcesContent":["import React from 'react'\nimport { ReactComponent as IconThumbsUp } from '@ant-design/icons-svg/inline-svg/outline/like.svg'\nimport { ReactComponent as IconThumbsDown } from '@ant-design/icons-svg/inline-svg/outline/dislike.svg'\nimport { ReactComponent as IconThumbsUpSolid } from '@ant-design/icons-svg/inline-svg/fill/like.svg'\nimport { ReactComponent as IconThumbsDownSolid } from '@ant-design/icons-svg/inline-svg/fill/dislike.svg'\nimport { ReactComponent as IconExchange } from '@ant-design/icons-svg/inline-svg/outline/pull-request.svg'\nimport { ReactComponent as IconCaretDown } from '@ant-design/icons-svg/inline-svg/outline/arrows-alt.svg'\nimport { ReactComponent as IconCaretUp } from '@ant-design/icons-svg/inline-svg/outline/shrink.svg'\nimport chroma from 'chroma-js'\nimport randomstring from 'randomstring'\nimport './node.css'\n\nconst ThumbUpColor = chroma(\"green\").luminance(0.3).desaturate(1)\nconst ThumbDownColor = chroma(\"red\").luminance(0.3).desaturate(2)\nconst ExchangeColor = chroma(\"blue\").luminance(0.3).desaturate(1)\nconst CaretColor = chroma(\"grey\").luminance(0.3)\nconst AbstractColor = chroma(\"grey\").luminance(0.1)\n\nexport class NodeCircle extends React.Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {hover: false}\n    }\n\n    onHover(hover) {\n        this.setState({hover})\n        if (this.props.onHover) this.props.onHover(hover)\n    }\n    \n    render() {\n        return (\n            <circle className=\"era-node-circle\" cx={this.props.node.x} cy={this.props.node.y} r={this.props.radius}\n                onMouseOver={() => { this.onHover(true) }}\n                onMouseLeave={() => { this.onHover(false) }}\n                stroke={this.props.color} strokeWidth={this.props.strokeWidth}\n                fill={this.state.hover ? this.props.color : \"white\"}/>\n        )\n    }\n\n}\n\nexport class NodeText extends React.Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {displayInteractionTool: false}\n        this.id = randomstring.generate(8)\n        this.state = { expand: -1 }\n    }\n\n    onEdit(action, source) {\n        if (this.props.onEdit) this.props.onEdit(action, source)\n    }\n\n    onHover(hover) {\n        if (!hover && this.state.expand !== -1) this.setState({expand: -1})\n    }\n\n    render() {\n        let textColor = chroma(this.props.color).darken()\n        let baseY = 0\n        let textLines = 0\n        const iconSize = this.props.lineHeight * 1.25\n        const texts = this.props.pins.map((pin, _idx) => {\n            baseY = textLines * this.props.lineHeight\n            const isFocus = this.state.expand === _idx\n            const collapseHandler = () => this.setState({expand: isFocus ? -1 : _idx})\n            const textPieces = isFocus ? pin.fullTextPieces : pin.textPieces\n            const abstractHeight = pin.abstractPieces.length * this.props.secondaryLineHeight\n            const iconY = (textPieces.length - 1) * this.props.lineHeight + this.props.editButtonMarginTop + isFocus * abstractHeight\n            const textWidth = isFocus ? this.props.fullTextWidth : this.props.textWidth\n            const generateEditIcon = (T, dx, fill, action) => <g transform={`translate(${textWidth-iconSize*dx}, ${iconY})`}>\n                <g className=\"paper-edit-icon\" style={{transformOrigin: `${iconSize/2}px ${iconSize/2}px`}}\n                    onClick={action === \"collapse\" ? collapseHandler : (() => this.onEdit(action, pin))}>\n                    <T className=\"paper-edit-icon\" fill={fill} width={iconSize} height={iconSize}/>\n                    <rect className=\"paper-edit-icon\" width={iconSize} height={iconSize} fill=\"transparent\"/>\n                </g>\n            </g>\n            const isUp = pin.edits && pin.edits.rate > 0\n            const isDown = pin.edits && pin.edits.rate < 0\n            const transformOriginX = (this.props.scaleOrigin === \"left\") ? 0 : (this.props.scaleOrigin === \"middle\" ? (textWidth / 2) : textWidth)\n            return (\n                <g className=\"paper-view-group-outer\"\n                    key={_idx}\n                    onMouseOver={() => this.onHover(true)}\n                    onMouseLeave={() => this.onHover(false)}\n                    transform={`translate(${this.props.textLeadingMargin + this.props.radius}, ${baseY})`}>\n                    <g className=\"paper-view-group-inner\" style={{transformOrigin: `${transformOriginX}px ${-this.props.lineHeight}px`}}>\n                        <rect className=\"paper-text-background\" x={-this.props.lineHeight} y={-this.props.lineHeight * 2.5}\n                            width={textWidth+2*this.props.lineHeight} height={this.props.lineHeight * 4 + iconY + iconSize}\n                            fill=\"white\" filter=\"url(#blur-filter)\"/>\n                        <text className=\"paper-text\" fontSize={this.props.fontSize} fill={textColor} onClick={collapseHandler}>\n                            {textPieces.map((_text, idx) => {\n                                textLines++\n                                return <tspan key={idx} x=\"0\" y={idx * this.props.lineHeight}>{_text}</tspan>\n                            })}\n                        </text>\n                        {isFocus && \n                            <text className=\"paper-abstract-inner\" fontSize={this.props.secondaryFontSize} fill={AbstractColor}>\n                                {pin.abstractPieces.map((_text, idx) => <tspan key={idx} x=\"0\" y={textPieces.length * this.props.lineHeight + idx * this.props.secondaryLineHeight}>{_text}</tspan>)}\n                            </text>}\n                        <g className=\"paper-edit-icon-group\">\n                            {this.props.editable && generateEditIcon(IconExchange, 6, ExchangeColor, \"to-exchange\")}\n                            {generateEditIcon(isUp ? IconThumbsUpSolid : IconThumbsUp, 4.5, ThumbUpColor, isUp ? \"thumb-delete\" : \"thumb-up\")}\n                            {generateEditIcon(isDown ? IconThumbsDownSolid : IconThumbsDown, 3, ThumbDownColor, isDown ? \"thumb-delete\" : \"thumb-down\")}\n                            {pin.abstractPieces.length > 0 && generateEditIcon(isFocus ? IconCaretUp : IconCaretDown, 1.5, CaretColor, \"collapse\")}\n                        </g>\n                    </g>\n                </g>\n            )\n        })\n        return (\n            <g className=\"era-node-text-group\" transform={`translate(${this.props.x}, ${this.props.y})`}>\n                {texts.reverse()}\n            </g>\n        )\n    }\n}","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M520.650142 80.061167L369.746208 410.281909l269.859169-71.853003 1.641632-0.631397-120.596867-257.736342z\",\n  fill: \"#E9624C\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M256.852386 657.03194l385.909977 121.859662 100.392157-222.756937-76.272784-163.279319-333.251449 96.098656-76.777901 168.077938z\",\n  fill: \"#2A698D\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M92.689111 1015.791836h865.266741L773.966704 622.052534l-102.286349 232.227895-442.735726-136.381798L92.689111 1015.791836z\",\n  fill: \"#233D7E\"\n});\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M484.281662 0H0v1015.791836h6.187693L483.650265 1.641633l0.631397-1.641633zM555.376989 0l0.505117 1.136515 483.271427 1014.655321h4.293501V0H555.376989z\",\n  fill: \"#3C3837\"\n});\n\nvar SvgLogo = function SvgLogo(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 1024 1024\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgLogo, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/logo.7ecb0366.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react'\nimport { NodeCircle, NodeText } from './node'\nimport randomstring from 'randomstring'\nimport chroma from 'chroma-js'\nimport lodash from 'lodash'\nimport './index.css'\nimport { ReactComponent as Logo } from '../logo.svg'\n\nexport default class MRTViewer extends React.Component {\n\n    constructor(props) {\n        super(props)\n\n        this.EraMinRatio = this.props.EraMinRatio || 0.05\n        this.lastEraRatio = this.props.lastEraRatio || 0.2\n\n        this.strokeWidth = 4\n\n        this.labelTextFontSize = 64\n        this.labelTextLineHeight = 72\n\n        this.nodeRadius = 20\n        this.nodeTextLeadingMargin = 20\n        this.nodeTextWidth = 260\n\n        this.nodeFullSpan = 2\n\n        this.horizonMarginTop = 32\n        this.horizonMarginBottom = 48\n\n        this.averageFontWidthRatio = 0.6\n        \n        this.nodePaddingLeft = 20\n        this.nodePaddingRight = 20\n        this.nodePaddingTop = 32\n        this.nodePaddingBottom = 12\n\n        this.nodeEditButtonMarginTop = 10\n\n        this.nodeOffsetX = this.nodePaddingLeft + this.nodeRadius\n        this.nodeOffsetY = this.nodePaddingTop + this.nodeRadius\n        \n        this.nodeWidth = this.nodePaddingLeft + 2 * this.nodeRadius + this.nodeTextLeadingMargin + this.nodeTextWidth + this.nodePaddingRight\n        this.nodeTextLines = (node) => node.pins.reduce((prev, pin) => prev + pin.textPieces.length, 0)\n        this.nodeHeight = (lines) => this.nodePaddingTop + this.nodeRadius + Math.max(this.nodeRadius, (lines-1) * this.nodeTextLineHeight) + this.nodePaddingBottom\n\n        this.state = {userEdits: this.props.userEdits || {}, toExchange: null, focusEraIndex: -1}\n    }\n\n    render() {\n\n        this._data = this.props.data\n\n        const extract = (paper) => {\n            const id = paper[\"paper_id\"]\n            const year = paper[\"paper_year\"]\n            const venue = paper[\"paper_venue\"].trim()\n            const title = paper[\"paper_title\"].trim()\n            const citations = paper[\"paper_citations\"]\n            let prefix = `${year}`\n            const venue_year = /^(19|20)\\d{2}\\b/.exec(venue)\n            if (venue_year == null && venue.length > 0) {\n                prefix = `${year} ${venue}`\n            } else if (venue_year != null) {\n                prefix = `${venue}`\n            }\n            const text = `[${prefix}] ${title}`.replace('\\t', ' ').replace('\\n', ' ')\n            const abstract = paper[\"paper_abstract\"] ? paper[\"paper_abstract\"].trim().replace('\\t', ' ') : \"\"\n            return {id, year, venue, title, citations, text, abstract}\n        }\n        this.data = {\n            root: extract(this._data.root),\n            branches: []\n        }\n        this._data.branches.forEach(branch => {\n            this.data.branches.push(branch[0].map(extract))\n            this.data.branches.push(branch[1].map(extract))\n        })\n        this.data.branches.forEach(branch => branch.sort((a, b) => {\n            return a.year === b.year ? (b.citations - a.citations) : (b.year - a.year)\n        }))\n        this.clusterNames = this.props.data.clusterNames.map(name => name.split(' ').map(lodash.capitalize).join(' '))\n\n        this.hideSubBranch = this.props.hideSubBranch\n        this.disableTextBranchSpan = this.props.disableTextBranchSpan\n        this.disableTextClusterSpan = this.props.disableTextClusterSpan\n\n        this.nodeFontExtraSize = this.props.fontExtraSize || 0\n        this.nodeTextFontSize = 20 + this.nodeFontExtraSize\n        this.nodeTextSecondaryFontSize = 16 + this.nodeFontExtraSize\n        this.nodeTextLineHeight = 20 + this.nodeFontExtraSize\n        this.nodeTextSecondaryLineHeight = 18 + this.nodeFontExtraSize\n        this.nodeTextFold = (text, span) => {\n            const textLength = Math.floor(((span - 1) * this.nodeWidth + this.nodeTextWidth) / (this.nodeTextFontSize * this.averageFontWidthRatio))\n            return (text.match(new RegExp(`([^\\\\n]{1,${textLength}})(\\\\s|$)`, 'g')) || []).filter(line => line.length > 0)\n        }\n        this.nodeTextSecondaryFold = (text, span) => {\n            const textLength = Math.floor(((span - 1) * this.nodeWidth + this.nodeTextWidth) / (this.nodeTextSecondaryFontSize * this.averageFontWidthRatio))\n            return (text.match(new RegExp(`([^\\\\n]{1,${textLength}})(\\\\s|$)`, 'g')) || []).filter(line => line.length > 0)\n        }\n\n        // initialize dataView (filter subBranch is hideSubBranch is enabled)\n        let dataView = {root: {...this.data.root}, branches: this.data.branches.map(() => [])}\n        this.data.branches.forEach((branch, idx) => branch.forEach(paper => {\n            const isSub = idx % 2 === 1\n            const edits = this.state.userEdits[paper.id]\n            const clusterID = edits ? edits.clusterID : Math.floor(idx / 2)\n            const branchID = clusterID * 2 + isSub\n            if (!this.hideSubBranch || !isSub) dataView.branches[branchID].push({...paper, isSub, edits, clusterID, branchID})\n        }))\n        dataView.branches.forEach(branch => branch.sort((a, b) => (a.year === b.year) ? (b.citations - a.citations) : (b.year - a.year)))\n\n        // calculate eras according to density of paper\n        let eras = []\n        {\n            let years = lodash.flatten(dataView.branches).map(paper => paper.year).sort().reverse()\n            let _to = years[0]\n            let _cnt = 1\n            let eraMinSize = this.EraMinRatio * years.length\n            let lastEraMinSize = this.lastEraRatio * years.length\n            for (let i = 1; i < years.length; i++) {\n                if (years[i] === years[i-1] || _cnt < eraMinSize || i > years.length - lastEraMinSize) _cnt += 1\n                else {\n                    eras.push({from: years[i-1], to: _to, cnt: _cnt})\n                    _to = years[i]\n                    _cnt = 1\n                }\n            }\n            eras.push({from: years[years.length-1], to: _to, cnt: _cnt})\n        }\n        const branchWithEra = (branch, era) => branch.filter(paper => paper.year >= era.from && paper.year <= era.to)\n\n        // initialize views\n        let numBranches = dataView.branches.length\n        let numClusters = Math.floor(numBranches / 2)\n        const rootColor = chroma.scale()(0.5)\n        const clusterColors = chroma.cubehelix().start(200).rotations(3).gamma(0.7).lightness([0.2, 0.6]).scale().correctLightness().colors(numClusters)\n        const branchColors = dataView.branches.map((_, branchID) => chroma(clusterColors[Math.floor(branchID / 2)]).luminance(branchID % 2 === 0 ? 0.25 : 0.5))\n        let views = {defs: [], nodes: {}, edges: []}\n        const addEdge = (x1, y1, x2, y2, color) => views.edges.push(<line key={views.edges.length} x1={x1} y1={y1} x2={x2} y2={y2} strokeWidth={this.strokeWidth - 1} stroke={color}/>)\n        const addVerticalEdge = (x, y1, y2, color) => addEdge(x, y1, x, y2, color)\n        const addHorizontalEdge = (x1, x2, y, color) => addEdge(x1, y, x2, y, color)\n        const generateGradientColor = (from, to, x1, y1, x2, y2) => {\n            const colorID = randomstring.generate(8)\n            views.defs.push(\n                <defs key={colorID}>\n                    <linearGradient id={colorID} x1={x1} y1={y1} x2={x2} y2={y2} gradientUnits=\"userSpaceOnUse\">\n                    <stop offset=\"20%\"  stopColor={from} />\n                    <stop offset=\"80%\" stopColor={to} />\n                    </linearGradient>\n                </defs>\n            )\n            return `url('#${colorID}')`\n        }\n\n        // Arrange coornidates for each era node\n        views.nodes.root = {\n            x: this.nodeWidth * (dataView.branches.length - 1) / 2 + this.nodeOffsetX,\n            y: this.nodeOffsetY,\n            color: rootColor,\n            pins: [{...dataView.root, \n                textPieces: this.nodeTextFold(dataView.root.text, 2), \n                fullTextPieces: this.nodeTextFold(dataView.root.text, this.nodeFullSpan),\n                abstractPieces: this.nodeTextSecondaryFold(dataView.root.abstract, this.nodeFullSpan),\n                edits: this.state.userEdits[dataView.root.id]\n            }],\n            span: 2,\n            fullSpan: this.nodeFullSpan,\n        }\n        views.nodes.root.lines = this.nodeTextLines(views.nodes.root)\n        views.nodes.root.height = this.nodeHeight(views.nodes.root.lines)\n\n        views.nodes.branches = dataView.branches.map((branch, branchID) => eras.map((era, eraID) => { return {\n            x: this.nodeWidth * branchID + this.nodeOffsetX,\n            y: 0,\n            color: branchColors[branchID],\n            pins: branchWithEra(branch, era),\n            era,\n            eraID,\n            clusterID: Math.floor(branchID / 2),\n            branchID,\n        }}))\n        \n        views.nodes.branches.forEach((branch, branchID) => branch.forEach((node, eraID) => {\n            if (node.pins.length === 0) return\n            node.span = (branchID < numBranches - 1 && views.nodes.branches[branchID+1][eraID].pins.length === 0\n                && !this.disableTextBranchSpan && (!this.disableTextClusterSpan || branchID % 2 === 0)) ? 2 : 1\n            node.fullSpan = (branchID < numBranches - 1) ? this.nodeFullSpan : 1\n            node.pins.forEach(pin => {\n                pin.textPieces = this.nodeTextFold(pin.text, node.span)\n                pin.fullTextPieces = this.nodeTextFold(pin.text, node.fullSpan)\n                pin.abstractPieces = this.nodeTextSecondaryFold(pin.abstract, node.fullSpan)\n            })\n            node.lines = this.nodeTextLines(node)\n            node.height = this.nodeHeight(node.lines)\n        }))\n\n        const horizon = views.nodes.root.height + this.horizonMarginTop\n        let _height = horizon + this.horizonMarginBottom\n        const erasHeight = eras.map((_, eraID) => {\n            views.nodes.branches.forEach(branch => branch[eraID].y = _height + this.nodeOffsetY)\n            const eraHeight = views.nodes.branches.reduce((prev, branch) => Math.max(prev, branch[eraID].height || 0), 0)\n            _height += eraHeight\n            return eraHeight\n        })\n\n        {\n            const node = views.nodes.root, nodeLeft = views.nodes.branches[0][0], nodeRight = views.nodes.branches[numBranches - 2][0]\n            addVerticalEdge(node.x, node.y, horizon, rootColor)\n            addHorizontalEdge(nodeLeft.x, nodeRight.x, horizon, rootColor)\n        }\n        views.nodes.branches.forEach((branch, branchID) => {\n            const _branch = branch.filter(node => node.pins.length > 0)\n            if (_branch.length === 0 && branchID % 2 === 1) return\n            const startEra = (branchID % 2 === 0) ? 0 : _branch[0].eraID\n            let endEra = (_branch.length > 0) ? _branch[_branch.length-1].eraID : 0\n            if (branchID % 2 === 0) {\n                const _nextBranch = views.nodes.branches[branchID+1].filter(node => node.pins.length > 0)\n                if (_nextBranch.length > 0) endEra = Math.max(endEra, _nextBranch[0].eraID)\n            }\n            const shrinkFlag = !this.disableTextBranchSpan && (!(this.disableTextClusterSpan && branchID % 2 === 0))\n            for (let eraID = startEra + 1; eraID <= endEra; eraID++) {\n                let node = branch[eraID]\n                let sib = branchID > 0 ? views.nodes.branches[branchID-1][eraID] : null\n                const yStart = (shrinkFlag && node.pins.length === 0 && ((branchID > 0 && sib.pins.length > 0) || (eraID === endEra))) ? (node.y - this.nodeRadius - this.nodeTextLineHeight) : node.y\n                node = branch[eraID-1]\n                sib = branchID > 0 ? views.nodes.branches[branchID-1][eraID-1] : null\n                const yEnd = (shrinkFlag && node.pins.length === 0 && branchID > 0 && sib.pins.length > 0) ? (node.y - this.nodeOffsetY + this.nodeHeight(this.nodeTextLines(sib)) - this.nodePaddingBottom + this.nodeTextLineHeight) : node.y\n                addVerticalEdge(node.x, yStart, yEnd, node.color)\n            }\n            if (branchID % 2 === 0) {\n                const node = branch[0]\n                const sib = branchID > 0 ? views.nodes.branches[branchID-1][0] : null\n                const yEnd = (shrinkFlag && node.pins.length === 0 && branchID > 0 && sib.pins.length > 0) ? (node.y - this.nodeRadius - this.nodeTextLineHeight) : node.y\n                addVerticalEdge(node.x, horizon, yEnd, generateGradientColor(rootColor, node.color, node.x, horizon, node.x, yEnd))\n            } else {\n                const node = branch[startEra]\n                const sib = views.nodes.branches[branchID-1][startEra]\n                const yEnd = node.y - this.nodeRadius - this.nodeTextLineHeight\n                const yStart = node.y\n                addVerticalEdge(node.x, yStart, yEnd, node.color)\n                addHorizontalEdge(node.x, sib.x, yEnd, generateGradientColor(node.color, sib.color, node.x, yEnd, sib.x, yEnd))\n            }\n        })\n        \n        const onEdit = (action, source, param) => {\n            const _state = {...this.state}\n            if (!_state.userEdits[source.id] && (action === \"thumb-up\" || action === \"thumb-down\" || action === \"exchange\")) {\n                _state.userEdits[source.id] = {rate: 0, clusterID: source.clusterID}\n            }\n            if (action === \"thumb-up\" && _state.userEdits[source.id].rate <= 0) {\n                _state.userEdits[source.id].rate = 1\n                this.setState(_state)\n            } else if (action === \"thumb-down\" && _state.userEdits[source.id].rate >= 0) {\n                _state.userEdits[source.id].rate = -1\n                this.setState(_state)\n            } else if (action === \"thumb-delete\" && _state.userEdits[source.id] && _state.userEdits[source.id].rate !== 0) {\n                _state.userEdits[source.id].rate = 0\n                this.setState(_state)\n            } else if (action === \"to-exchange\" && _state.toExchange === null) {\n                _state.toExchange = source\n                this.setState(_state)\n            } else if (action === \"exchange\") {\n                _state.userEdits[source.id].clusterID = param\n                _state.toExchange = null\n                this.setState(_state)\n            }\n        }\n\n        const extendedBottomY = views.nodes.branches.map(branch => branch[branch.length-1]).reduce((prev, node) => {\n            let centerY = node.y\n            node.pins.forEach(pin => {\n                prev = Math.max(prev, centerY + (pin.fullTextPieces.length - 1) * this.nodeTextLineHeight * 2 + pin.abstractPieces.length * this.nodeTextSecondaryLineHeight + this.nodeTextLineHeight * 2)\n                centerY += pin.textPieces.length * this.nodeTextLineHeight\n            })\n            return prev\n        }, _height)\n\n        const renderNodes = lodash.flattenDeep(views.nodes.branches).sort((a, b) => (a.eraID === b.eraID) ? (b.branchID - a.branchID) : (b.eraID - a.eraID))\n        renderNodes.push(views.nodes.root)\n\n        const _width = this.nodeWidth * dataView.branches.length\n        const clusterLabelTextPieces = this.clusterNames.map(name => name.split(' '))\n        const clusterLabelTexts = clusterLabelTextPieces.map((pieces, _idx) => \n            <text key={_idx}>\n                {pieces.reverse().map((_text, idx) => <tspan key={idx} x=\"0\" y={-idx * this.labelTextLineHeight}>{_text}</tspan>)}\n            </text>\n        )\n        const clusterLabelsHeight = clusterLabelTextPieces.reduce((prev, pieces) => Math.max(prev, pieces.length), 0) * this.labelTextLineHeight\n        _height += clusterLabelsHeight + this.labelTextLineHeight\n\n        const extendedHeight = Math.max(this.labelTextLineHeight * 1.5, extendedBottomY - _height)\n        const backgroundSolidColors = clusterColors.map(color => chroma(color).luminance(0.9))\n        const backgroundTextSolidColors = clusterColors.map(color => chroma(color).luminance(0.7))\n        const backgroundGradientSolidColors = clusterColors.map((color, idx) => {\n            const x = views.nodes.branches[idx*2][eras.length-1].x\n            return generateGradientColor(chroma(color).luminance(0.9), \"white\", x, _height, x, _height+extendedHeight)\n        })\n        const backgroundSelectionColors = clusterColors.map(color => chroma(color).luminance(0.5))\n        const backgroundTextSelectionColors = clusterColors.map(color => chroma(color).luminance(0.2))\n        const backgroundGradientSelectionColors = clusterColors.map((color, idx) => {\n            const x = views.nodes.branches[idx*2][eras.length-1].x\n            return generateGradientColor(chroma(color).luminance(0.5), \"white\", x, _height, x, _height+extendedHeight)\n        })\n\n        return <svg className=\"mrt\" id={this.props.id} width=\"100%\" viewBox={`0 0 ${_width} ${_height+extendedHeight}`}>\n            {views.defs}\n            <filter id=\"blur-filter\">\n                <feGaussianBlur stdDeviation={this.nodeTextLineHeight} in=\"SourceGraphic\"/>\n            </filter>\n            {\n                <g className=\"mrt-background\">\n                    <rect x=\"0\" y=\"0\" width={_width} height={horizon} fill={chroma(rootColor).luminance(0.9)}></rect>\n                </g>\n            }\n            {\n                clusterLabelTexts.map((texts, idx) => {\n                    return <g className=\"mrt-background\" key={idx} opacity={this.state.toExchange === null ? 1 : 0}>\n                        <rect x={this.nodeWidth*idx*2} y={horizon} width={this.nodeWidth*2} height={_height-horizon} fill={backgroundSolidColors[idx]}/>\n                        <rect x={this.nodeWidth*idx*2} y={_height} width={this.nodeWidth*2} height={extendedHeight} fill={backgroundGradientSolidColors[idx]}/>\n                        <g transform={`translate(${this.nodeWidth*idx*2+this.nodeOffsetX}, ${_height-this.labelTextLineHeight/2})`} fill={backgroundTextSolidColors[idx]} fontSize={this.labelTextFontSize}>{texts}</g>\n                    </g>\n                })\n            }\n            {\n                eras.map((era, idx) => \n                <g key={idx} className=\"mrt-era-background\" transform={`translate(0, ${views.nodes.branches[0][idx].y - this.nodeRadius - this.nodePaddingTop + erasHeight[idx]})`}>\n                    <rect className=\"mrt-era-background\" x=\"0\" y={-erasHeight[idx]} width={_width} height={erasHeight[idx]} opacity={(idx === this.state.focusEraIndex) ? 0.1 : 0}/>\n                    <text className=\"mrt-era-background\" fontSize={this.labelTextFontSize} x={this.nodePaddingLeft} y={-this.labelTextFontSize/2} opacity={(idx === this.state.focusEraIndex) ? 0.2 : 0}>\n                        {era.from === era.to ? era.from : `${era.from} - ${era.to}`}\n                    </text>\n                </g>)\n            }\n            {\n                views.nodes.branches.map((branch, idx) => {\n                    if (idx % 2 !== 0) return <text key={idx}/>\n                    const _branch = branch.filter(node => node.pins.length > 0)\n                    const _sibBranch = views.nodes.branches[idx+1].filter(node => node.pins.length > 0)\n                    if (_branch.length === 0 && _sibBranch.length === 0) return <text key={idx}/>\n                    const fontSize = this.nodeTextFontSize * 2\n                    const y = ((_branch.length === 0 || (_sibBranch.length > 0 && _sibBranch[0].eraID <= _branch[0].eraID)) ?\n                        (_sibBranch[0].y - this.nodeRadius - this.nodeTextLineHeight) :\n                        (_branch[0].y - this.nodeTextLineHeight)) - fontSize / 2\n                    const x = branch[0].x + this.nodeRadius + this.nodeTextLeadingMargin\n                    const color = chroma(branchColors[idx]).darken(2)\n                    return <text key={idx} x={x} y={y} fill={color} fontSize={fontSize}>{this.clusterNames[Math.floor(idx / 2)]}</text>\n                })\n            }\n            {views.edges}\n            {renderNodes.map((node, idx) => node.pins.length > 0 &&\n                <NodeCircle key={idx} node={node}\n                            radius={this.nodeRadius}\n                            lineHeight={this.nodeTextLineHeight}\n                            color={node.color}\n                            strokeWidth={this.strokeWidth}\n                            onHover={(hover) => \n                                this.setState({...this.state,\n                                    focusEraIndex: hover ? node.eraID : -1\n                                })   \n                            }/>\n            )}\n            <g className=\"mrt-node-text-container\">\n            {renderNodes.map((node, idx) => node.pins.length > 0 &&\n                <NodeText key={idx}\n                      pins={node.pins} \n                      x={node.x} y={node.y}\n                      radius={this.nodeRadius}\n                      lineHeight={this.nodeTextLineHeight}\n                      secondaryLineHeight={this.nodeTextSecondaryLineHeight}\n                      textWidth={(node.span - 1) * this.nodeWidth + this.nodeTextWidth}\n                      fullTextWidth={(node.fullSpan - 1) * this.nodeWidth + this.nodeTextWidth}\n                      color={node.color}\n                      fontSize={this.nodeTextFontSize}\n                      secondaryFontSize={this.nodeTextSecondaryFontSize}\n                      strokeWidth={this.strokeWidth}\n                      onEdit={onEdit}\n                      textLeadingMargin={this.nodeTextLeadingMargin}\n                      editable={typeof(node.clusterID) !== \"undefined\"}\n                      editButtonMarginTop={this.nodeEditButtonMarginTop}\n                      scaleOrigin={(node.clusterID === numClusters - 1) ? \"right\" : ((node.branchID === numBranches - 3) ? \"middle\" : \"left\")}/>)}\n            </g>\n            {\n                clusterLabelTexts.map((texts, idx) => {\n                    const isCurrent = this.state.toExchange !== null && idx === this.state.toExchange.clusterID\n                    return <g className=\"mrt-background\" key={idx} opacity={this.state.toExchange === null ? 0 : 1} visibility={this.state.toExchange === null ? \"hidden\" : \"none\"} onClick={() => onEdit(\"exchange\", this.state.toExchange, idx)}>\n                        <rect className=\"mrt-background-card\" x={this.nodeWidth*idx*2} y={horizon} width={this.nodeWidth*2} height={_height-horizon} fill={backgroundSelectionColors[idx]}/>\n                        <rect className=\"mrt-background-card\" x={this.nodeWidth*idx*2} y={_height} width={this.nodeWidth*2} height={extendedHeight} fill={backgroundGradientSelectionColors[idx]}/>\n                        <g className=\"mrt-background-text\" style={{textDecoration: isCurrent ? \"underline\" : \"\"}} transform={`translate(${this.nodeWidth*idx*2+this.nodeOffsetX}, ${_height-this.labelTextLineHeight/2})`} fill={backgroundTextSelectionColors[idx]} fontSize={this.labelTextFontSize}>{texts}</g>\n                    </g>\n                })\n            }\n            {\n                <g opacity=\"0.5\" transform={`translate(${_width}, ${_height+extendedHeight-this.labelTextLineHeight * 0.5})`}>                    \n                    <Logo x={-this.labelTextFontSize * 3.35} y={-this.labelTextFontSize * 1.78} height={this.labelTextFontSize * 0.8} width={this.labelTextFontSize * 0.8}/>\n                    <text x={-this.labelTextFontSize * 0.1} y={-this.labelTextFontSize * 0.05} textAnchor=\"end\"\n                        fontSize={this.labelTextFontSize * 0.75} fill={chroma(\"grey\").luminance(0.3).hex()}>{(this.props.authors || []).join(', ')}\n                    </text>\n                    <text x={-this.labelTextFontSize * 0.1} y={-this.labelTextFontSize * 1} textAnchor=\"end\"\n                        fontSize={this.labelTextFontSize * 0.7} fill={chroma(\"grey\").luminance(0.3).hex()}>AMiner\n                    </text>\n                </g>\n            }\n        </svg>\n    }\n}","import React from 'react'\nimport MRTViewer from './mrt-viewer'\nimport { Icon } from 'antd'\nimport chroma from 'chroma-js'\nimport './index.css'\nimport svgLib from 'save-svg-as-png'\nimport QRCode from 'qrcode'\n\nexport default class MRT extends React.Component {\n    \n    constructor(props) {\n        super(props)\n        this.state = {\n            userEdits: this.props.userEdits || {},\n            like: this.props.like || false,\n            viewerScale: 100,\n            hideSubBranch: false,\n            disableTextClusterSpan: false,\n            fontExtraSize: 0,\n            displayQRCode: false,\n        }\n        this.generated = false\n    }\n\n    like() {\n        this.setState({...this.state, like: !this.state.like})\n    }\n\n    capture(full) {\n        if (full)\n            svgLib.saveSvgAsPng(document.getElementById(\"mrt-viewer\"), `master-reading-tree.png`)\n        else {\n            const srcWidth = document.getElementById(\"mrt-viewer\").viewBox.baseVal.width\n            const outputWidth = document.body.clientWidth\n            svgLib.saveSvgAsPng(document.getElementById(\"mrt-viewer\"), `master-reading-tree-snapshot.png`, {scale: outputWidth / srcWidth})\n        }\n    }\n\n    zoom(larger) {\n        this.setState({...this.state, viewerScale: Math.min(Math.max(this.state.viewerScale + (larger ? 10 : -10), 100), 1000)})\n    }\n\n    scaleFont(larger) {\n        this.setState({...this.state, fontExtraSize: Math.max(0, Math.min(10, this.state.fontExtraSize + (larger ? 2 : -2)))})\n    }\n\n    displayQRCode(display) {\n        if (!this.generated) {\n            QRCode.toCanvas(document.getElementById(\"mrt-share-qrcode-canvas\"), window.location.href, (e) => { if (e) console.error(e) })\n            this.generated = true\n        }\n        this.setState({...this.state, displayQRCode: display})\n    }\n\n    onLoadJson(e) {\n        if (e.target.files.length === 0) return\n        const reader = new FileReader()\n        reader.onload = (e) => {\n            if (this.props.onLoadJson) this.props.onLoadJson(JSON.parse(e.target.result))\n        }\n        reader.readAsText(e.target.files[0])\n    }\n\n    render() {\n        return (\n            <div className=\"mrt-container\" style={{width: `${this.state.viewerScale}%`}}>\n                <div className=\"mrt-toolbox mrt-toolbox-menu horizontal\">\n                    <div className=\"menu-item horizontal-secondary mrt-toolbox-tool-icon\" onClick={() => this.like()}>\n                        <Icon type=\"heart\" theme={this.state.like ? \"filled\" : \"twoTone\"}\n                            twoToneColor={chroma(\"red\").luminance(0.4).hex()}\n                            style={{color: chroma(\"red\").luminance(0.4).hex()}}/>\n                    </div>\n                    <div className=\"menu-item horizontal-secondary mrt-toolbox-menu vertical\">\n                        <div className=\"menu-item mrt-toolbox-tool-icon\">\n                            <Icon type=\"share-alt\" theme=\"outlined\" style={{color: chroma(\"green\").luminance(0.4).hex()}}/>\n                        </div>\n                        <div className=\"menu-item vertical-secondary mrt-toolbox-tool-icon\" \n                            onMouseOver={() => this.displayQRCode(true)}\n                            onMouseLeave={() => this.displayQRCode(false)}>\n                            <Icon type=\"qrcode\" theme=\"outlined\" style={{color: chroma(\"green\").luminance(0.2).hex()}}/>\n                        </div>\n                    </div>\n                    <div className=\"menu-item horizontal-secondary mrt-toolbox-menu vertical\">\n                        <div className=\"menu-item mrt-toolbox-tool-icon\">\n                            <Icon type=\"font-size\" theme=\"outlined\" style={{color: chroma(\"pink\").luminance(0.4).hex()}}/>\n                        </div>\n                        <div className=\"menu-item vertical-secondary mrt-toolbox-tool-icon\" onClick={() => this.scaleFont(true)}>\n                            <Icon type=\"zoom-in\" theme=\"outlined\" style={{color: chroma(\"pink\").luminance(0.2).hex()}}/>\n                        </div>\n                        <div className=\"menu-item vertical-secondary mrt-toolbox-tool-icon\" onClick={() => this.scaleFont(false)}>\n                            <Icon type=\"zoom-out\" theme=\"outlined\" style={{color: chroma(\"pink\").luminance(0.2).hex()}}/>\n                        </div>\n                    </div>\n                    <div className=\"menu-item horizontal-secondary mrt-toolbox-menu vertical\">\n                        <div className=\"menu-item mrt-toolbox-tool-icon\">\n                            <Icon type=\"search\" theme=\"outlined\" style={{color: chroma(\"aquamarine\").luminance(0.4).hex()}}/>\n                        </div>\n                        <div className=\"menu-item vertical-secondary mrt-toolbox-tool-icon\" onClick={() => this.zoom(true)}>\n                            <Icon type=\"zoom-in\" theme=\"outlined\" style={{color: chroma(\"aquamarine\").luminance(0.2).hex()}}/>\n                        </div>\n                        <div className=\"menu-item vertical-secondary mrt-toolbox-tool-icon\" onClick={() => this.zoom(false)}>\n                            <Icon type=\"zoom-out\" theme=\"outlined\" style={{color: chroma(\"aquamarine\").luminance(0.2).hex()}}/>\n                        </div>\n                    </div>\n                    <div className=\"menu-item horizontal-secondary mrt-toolbox-menu vertical\">\n                        <div className=\"menu-item mrt-toolbox-tool-icon\">\n                            <Icon type=\"download\" theme=\"outlined\" style={{color: chroma(\"blue\").luminance(0.4).hex()}}/>\n                        </div>\n                        <div className=\"menu-item vertical-secondary mrt-toolbox-tool-icon\" onClick={() => this.capture(true)}>\n                            <Icon type=\"file-image\" theme=\"twoTone\" twoToneColor={chroma(\"blue\").luminance(0.2).hex()}/>\n                        </div>\n                        <div className=\"menu-item vertical-secondary mrt-toolbox-tool-icon\" onClick={() => this.capture(false)}>\n                            <Icon type=\"camera\" theme=\"twoTone\" twoToneColor={chroma(\"blue\").luminance(0.2).hex()}/>\n                        </div>\n                    </div>\n                    <div className=\"menu-item horizontal-secondary mrt-toolbox-menu vertical\">\n                        <div className=\"menu-item mrt-toolbox-tool-icon\">\n                            <Icon type=\"control\" theme=\"outlined\" style={{color: chroma(\"teal\").luminance(0.4).hex()}}/>\n                        </div>\n                        <div className=\"menu-item vertical-secondary mrt-toolbox-tool-icon\" onClick={() => this.setState({...this.state, hideSubBranch: !this.state.hideSubBranch})}>\n                            <Icon type={`eye${this.state.hideSubBranch ? \"\" : \"-invisible\"}`} theme=\"twoTone\" twoToneColor={chroma(\"teal\").luminance(0.2).hex()}/>\n                        </div>\n                        <div className=\"menu-item vertical-secondary mrt-toolbox-tool-icon\" onClick={() => this.setState({...this.state, disableTextClusterSpan: !this.state.disableTextClusterSpan})}>\n                            <Icon type=\"column-width\" theme=\"outlined\" style={{color: chroma(\"teal\").luminance(0.2).hex()}}/>\n                        </div>\n                        <div className=\"menu-item vertical-secondary mrt-toolbox-tool-icon\" onClick={() => document.getElementById(\"mrt-file-load-input\").click()}>\n                            <Icon type=\"folder-open\" theme=\"outlined\" style={{color: chroma(\"teal\").luminance(0.2).hex()}}/>\n                            <input id=\"mrt-file-load-input\" type=\"file\" hidden onChange={(e) => this.onLoadJson(e)}/>\n                        </div>\n                    </div>\n                    <div className=\"menu-item mrt-toolbox-menu vertical\">\n                        <div className=\"menu-item mrt-toolbox-tool-icon\">\n                            <Icon type=\"appstore\" theme=\"outlined\" style={{color: chroma(\"purple\").luminance(0.4).hex()}}/>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"mrt-qrcode\" style={{display: this.state.displayQRCode ? \"block\" : \"none\"}}>\n                    <canvas id=\"mrt-share-qrcode-canvas\"/>\n                </div>\n                <MRTViewer id=\"mrt-viewer\" data={this.props.data} userEdits={this.userEdits} \n                    hideSubBranch={this.state.hideSubBranch} disableTextClusterSpan={this.state.disableTextClusterSpan}\n                    fontExtraSize={this.state.fontExtraSize}\n                    authors={this.props.authors}/>\n            </div>\n        )\n    }\n}","import React from 'react';\nimport './App.css';\nimport sample_data from './sample.json';\nimport MRT from './components';\n\nclass App extends React.Component {\n  \n  constructor(props) {\n    super(props)\n    this.state = {data: sample_data}\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <MRT data={this.state.data} authors={[\"Somefive\", \"Rainatum\"]} onLoadJson={(data) => this.setState({data})}/>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}